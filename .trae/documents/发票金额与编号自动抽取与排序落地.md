# 完善 Prompt 管理指南并补充文件角色说明

## 文件角色说明
- `/.trae/documents/prompt-rules.md`: 面向人阅读的项目级规则文档，描述语言、代码风格、错误处理、测试等规范，以及场景化规则（如 PDF 处理、TypeScript 开发、库/组件目录约定）。
- `/.trae/config/ai-prompts.json`: 结构化配置，给工具/插件读取；包含项目元信息、全局规则、上下文分组及特定 Prompt 模板，便于自动化校验与 IDE 集成。
- `/prompts/{context}/{purpose}.md`: 分类的 Prompt 文档（可选目录）；按上下文与用途组织，如开发/测试/发布的专用提示词，便于团队复用与版本化管理。
- `src/**/.prompt-rules`: 文件夹级规则，支持继承与覆盖；用于对不同层（lib/components/services）施加更细致的约定与质量要求。
- 现有相关文档（已存在）：
  - `/.trae/documents/PDF合并排版工具-产品需求文档.md`: 功能与流程需求。
  - `/.trae/documents/PDF合并排版工具-技术架构文档.md`: 技术栈与服务划分。
  - 其他修复与实现计划类文档（OCR、预览稳定性、基础功能计划）。

## rule.md 与 prompts.json 的区别
- **目标对象**：
  - `prompt-rules.md` 面向人类读者；用于沟通、传达规则与最佳实践。
  - `ai-prompts.json` 面向工具与自动化；用于机器读取与校验、IDE/CI 集成。
- **表现形式**：
  - `prompt-rules.md` 叙述性、示例丰富、包含场景化指导；便于讨论与评审。
  - `ai-prompts.json` 键值对结构、稳定字段；便于版本化和程序解析。
- **使用场景**：
  - `prompt-rules.md` 作为团队规范手册与参考。
  - `ai-prompts.json` 供自动化流程（如 lint、CI 规则校验、IDE 提示）读取。
- **维护方式**：
  - `prompt-rules.md` 由架构/产品/团队共同维护，变更需评审。
  - `ai-prompts.json` 由工具维护者或 DevOps 维护，变更需同步工具兼容性。

## 示例与模板补充
- 在指南中增加两个示例：
  1) `prompt-rules.md` 示例结构（语言、代码风格、错误处理、PDF/TS 场景规则、文件夹特定规则）。
  2) `ai-prompts.json` 示例结构（项目元信息、全局规则、contexts 下的 prompts 模板）。
- 说明如何从 `prompt-rules.md` 提炼要点到 `ai-prompts.json`，并在 CI 中校验 JSON 格式与文件夹级 YAML。

## 使用流程示例
- 编写/更新规范：先改 `prompt-rules.md` → 讨论评审 → 同步关键规则到 `ai-prompts.json`。
- 工具消费：IDE 插件/CI 读取 `ai-prompts.json` 应用规则与提供提示；文件夹级 `.prompt-rules` 提供差异化约束。
- 团队协作与版本控制：两类文件都纳入版本管理，重大变更走评审流程。

## 项目现状与建议
- 当前仓库仅存在 `prompt-management-guide.md`，尚未落地 `prompt-rules.md` 与 `ai-prompts.json` 两个文件。
- 本次仅在 `/.trae/documents/prompt-management-guide.md` 中补充上述“文件角色说明、区别、示例与流程”章节，不新增文件。
- 后续如需自动化校验与 IDE 集成，再按指南创建 `ai-prompts.json` 与必要的文件夹级 `.prompt-rules`。